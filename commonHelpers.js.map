{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst apiKey = '45177339-1086f924218083686626b70b0';\nconst pixabayUrl = 'https://pixabay.com/api/';\n\nexport default async function searchImage(query, page) {\n  const params = new URLSearchParams({\n    key: apiKey,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    perPage: 15,\n    page: page,\n  });\n  try {\n    const response = await axios.get(`${pixabayUrl}?${params}`);\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\n\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nexport default function createGallery(data) {\n  let galleryList = document.querySelector('.search-results');\n  let gallery = new SimpleLightbox('.search-results a');\n  let images = data.hits\n    .map(\n      hit =>\n        `<div class=\"image-holder\">\n          <a href=\"${hit.largeImageURL}\">\n            <img class=\"image\" src=\"${hit.webformatURL}\" alt=\"${hit.tags}\">\n          </a>\n          <ul class=\"attributes-list\">\n            \n            <li class=\"text-wrapper\">\n              <h4 class=\"image-likes\">Likes</h4>\n              <p class=\"image-number\">${hit.likes}</p>\n            </li>\n            <li class=\"text-wrapper\">\n              <h4 class=\"image-views\">Views</h4>\n              <p class=\"image-number\">${hit.views}</p>\n            </li>\n            <li class=\"text-wrapper\">\n              <h4 class=\"image-comments\">Comments</h4>\n              <p class=\"image-number\">${hit.comments}</p>\n            </li>\n            <li class=\"text-wrapper\">\n              <h4 class=\"image-downloads\">Downloads</h4>\n              <p class=\"image-number\">${hit.downloads}</p>\n            </li>\n            \n          </ul>\n        </div>`\n    )\n    .join('');\n\n  galleryList.insertAdjacentHTML('beforeend', images);\n  gallery.refresh();\n  console.log('success');\n}\nexport function clearGallery() {\n  let galleryList = document.querySelector('.search-results');\n  galleryList.innerHTML = '';\n}\n","import searchImage from './js/pixabay-api';\n\nimport iziToast from 'izitoast';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport createGallery, { clearGallery } from './js/render-functions';\n\nconst button = document.querySelector('.submit-button');\nconst inputLine = document.querySelector('.search-input');\nconst inputForm = document.querySelector('.input-form');\nconst inputLoader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.load-more-button');\n\nlet inputValue;\nlet page = 1;\nlet limit = 15;\nlet totalPages = 0;\n\ninputForm.addEventListener('submit', implementSubmit);\nloadMoreButton.addEventListener('click', loadMoreImages);\n\nfunction implementSubmit(event) {\n  event.preventDefault();\n  clearGallery();\n  inputLoader.classList.remove('hidden');\n\n  let queryWord = inputLine.value.trim();\n\n  if (queryWord === '') {\n    iziToast.error({\n      position: 'topRight',\n      message: 'Please fill the input',\n    });\n    inputLoader.classList.add('hidden');\n    return;\n  }\n\n  inputValue = queryWord;\n  page = 1;\n\n  searchImage(inputValue, page)\n    .then(data => {\n      if (data.totalHits === 0) {\n        iziToast.error({\n          position: 'topRight',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        inputLoader.classList.add('hidden');\n        return;\n      }\n\n      totalPages = Math.ceil(data.totalHits / limit);\n      createGallery(data);\n      inputLoader.classList.add('hidden');\n\n      if (page < totalPages) {\n        loadMoreButton.classList.remove('hidden');\n      } else {\n        loadMoreButton.classList.add('hidden');\n        iziToast.info({\n          position: 'topRight',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n    })\n    .catch(error => {\n      iziToast.error({\n        position: 'topRight',\n        message: `An error occurred: ${error.message}`,\n      });\n      inputLoader.classList.add('hidden');\n    });\n}\n\nfunction loadMoreImages() {\n  page += 1;\n  inputLoader.classList.remove('hidden');\n\n  searchImage(inputValue, page)\n    .then(data => {\n      createGallery(data);\n      inputLoader.classList.add('hidden');\n\n      scrollDownByTwoCards();\n\n      if (page >= totalPages) {\n        loadMoreButton.classList.add('hidden');\n        iziToast.info({\n          position: 'topRight',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n    })\n    .catch(error => {\n      iziToast.error({\n        position: 'topRight',\n        message: `An error occurred: ${error.message}`,\n      });\n      inputLoader.classList.add('hidden');\n    });\n}\n\nfunction scrollDownByTwoCards() {\n  const galleryList = document.querySelector('.search-results');\n  const cards = galleryList.querySelectorAll('.image-holder');\n\n  if (cards.length >= 2) {\n    const cardHeight = cards[0].getBoundingClientRect().height;\n    const scrollAmount = cardHeight * 2;\n\n    window.scrollBy({\n      top: scrollAmount,\n      behavior: 'smooth',\n    });\n  }\n}\n"],"names":["apiKey","pixabayUrl","searchImage","query","page","params","axios","error","createGallery","data","galleryList","gallery","SimpleLightbox","images","hit","clearGallery","inputLine","inputForm","inputLoader","loadMoreButton","inputValue","limit","totalPages","implementSubmit","loadMoreImages","event","queryWord","iziToast","scrollDownByTwoCards","cards","scrollAmount"],"mappings":"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"}